<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Phong Thủy Lê Gia</title>
 <link rel="stylesheet" href="style.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container page-enter">
    <div class="layer">
      <header>
        <h1>Ứng dụng Phong Thủy LÊ GIA </h1>
        <p class="subtitle">MỆNH CỦA MÌNH LÀ DO MÌNH</p>
      </header>
    </div>

     <div class="layer">
      <main class="block-container">
        <div class="layer">
          <section id="input-section" class="card">
        <h2>1) Thông tin khách hàng</h2>

        <div class="grid-2">
          <div class="form-group">
            <label for="kh-ten">Họ tên khách hàng</label>
            <input type="text" id="kh-ten" placeholder="VD: Nguyễn Văn A">
          </div>

          <div class="form-group">
            <label for="kh-phone">Số điện thoại</label>
            <input type="tel" id="kh-phone" placeholder="VD: 09xxxxxxxx" inputmode="tel">
          </div>

            <div class="form-group">
              <label for="ngay-sinh">Ngày sinh</label>
              <div class="form-inline">
                <input type="text" id="ngay-sinh" placeholder="VD: YYYY-MM-DD hoặc DD/MM/YYYY">
                <select id="calendar-type" style="margin-left:4px;">
                  <option value="solar" selected>Dương lịch</option>
                  <option value="lunar">Âm lịch</option>
                </select>
              </div>
              <span id="ngay-am" class="muted"></span>
            </div>

          <div class="form-group">
            <label for="gioi-tinh">Giới tính</label>
            <select id="gioi-tinh">
              <option value="nam">Nam</option>
              <option value="nu">Nữ</option>
            </select>
          </div>

          <div class="form-group">
            <label for="huong-nha">Hướng nhà/đất</label>
            <select id="huong-nha">
              <option value="Bắc">Bắc</option>
              <option value="Đông Bắc">Đông Bắc</option>
              <option value="Đông">Đông</option>
              <option value="Đông Nam">Đông Nam</option>
              <option value="Nam">Nam</option>
              <option value="Tây Nam">Tây Nam</option>
              <option value="Tây">Tây</option>
              <option value="Tây Bắc">Tây Bắc</option>
            </select>
          </div>

          <div class="form-group">
            <label for="nam-xay">Năm xây/sửa (dương lịch)</label>
            <input type="number" id="nam-xay" placeholder="2025" min="1900" max="2099">
          </div>

          <div class="form-group">
            <label for="thang-xay">Tháng xây/sửa</label>
            <select id="thang-xay">
              <option value="1">1</option><option value="2">2</option><option value="3">3</option>
              <option value="4">4</option><option value="5">5</option><option value="6">6</option>
              <option value="7">7</option><option value="8">8</option><option value="9">9</option>
              <option value="10">10</option><option value="11">11</option><option value="12">12</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="ad-month">Tháng xem ngày đẹp</label>
            <input type="month" id="ad-month">
            <button id="btn-auspicious" type="button" class="secondary" style="margin-top:4px;">Xem ngày đẹp</button>
          </div>
        </div>

        <div id="horoscope-wrap" class="form-group" style="margin-top:10px;">
          <h3>Tra cứu tử vi</h3>
          <button id="btn-horoscope" type="button">Tra cứu tử vi</button>
          <div id="horoscope-result" class="muted" style="margin-top:6px;">—</div>
        </div>
            
        <h2 style="margin-top:10px">2) Thông tin bất động sản (phường/xã mới)</h2>

        <div class="grid-3">
          <div class="form-group">
            <label for="bd-province">Tỉnh</label>
            <select id="bd-province">
              <option value="Đồng Nai" selected>Đồng Nai</option>
              <option value="Bình Phước">Bình Phước</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="bd-huyen">Huyện</label>
            <input id="bd-huyen" type="text" placeholder="VD: Nhơn Trạch">
          </div>

          <div class="form-group">
            <label for="bd-ward">Phường/Xã (mới)</label>
            <select id="bd-ward"></select>
            <div id="ward-custom-wrap" style="display:none;margin-top:6px">
              <input type="text" id="bd-ward-custom" placeholder="Nhập tên phường/xã (khi chọn 'Khác')">
              <button id="btn-save-ward" class="secondary" type="button">Lưu phường vào danh sách</button>
            </div>
          </div>

          <div class="form-group">
            <label for="bd-to">Tờ</label>
            <input id="bd-to" type="text" placeholder="VD: 123">
          </div>

          <div class="form-group">
            <label for="bd-thua">Thửa</label>
            <input id="bd-thua" type="text" placeholder="VD: 45">
          </div>

          <div class="form-group">
            <label for="bd-price">Giá tiền (VNĐ)</label>
            <input id="bd-price" type="number" placeholder="Ví dụ: 2500000000">
          </div>
        </div>

        <div class="form-group">
          <label for="bd-address-detail">Địa chỉ chi tiết (đường/số nhà/tổ...)</label>
          <input id="bd-address-detail" type="text" placeholder="VD: 123 Lê Duẩn, Tổ 5">
        </div>

        <div class="form-group">
          <label for="bd-note">Ghi chú BĐS</label>
          <textarea id="bd-note" placeholder="Diện tích, pháp lý, tình trạng..."></textarea>
        </div>

        <div class="form-group">
          <strong>Địa chỉ đầy đủ sẽ lưu:</strong>
          <div id="bd-full-address" class="muted">—</div>
        </div>

        <h3>Môi trường & lỗi phong thủy (50+ mục)</h3>
        <div class="list-actions">
          <input id="issues-search" type="text" placeholder="Tìm theo từ khóa...">
        </div>
        <div id="issues-container" class="issues-grid"></div>

        <h2 style="margin-top:10px">3) La bàn số</h2>
        <div class="compass-wrap">
          <div class="compass">
            <div class="dial"></div>
            <div class="label label-n">N</div>
            <div class="label label-e">E</div>
            <div class="label label-s">S</div>
            <div class="label label-w">W</div>
            <div id="needle" class="needle"></div>
          </div>
          <div class="compass-info">
            <div><strong>Hướng hiện tại:</strong> <span id="compass-dir">--</span></div>
            <div><strong>Góc:</strong> <span id="compass-deg">--</span>°</div>
            <div><strong>Địa chi:</strong> <span id="compass-branch">--</span></div>
            <div><strong>Quẻ:</strong> <span id="compass-trigram">--</span></div>
            <div class="form-inline">
              <label for="compass-offset">Bù lệch (°):</label>
              <input type="number" id="compass-offset" value="0" step="1">
            </div>
            <div class="compass-actions">
              <button id="btn-compass-start" class="secondary">Bắt đầu la bàn</button>
              <button id="btn-compass-stop" class="secondary">Dừng</button>
              <button id="btn-compass-apply">Lấy hướng nhà từ la bàn</button>
            </div>
            <div id="compass-status" class="muted"></div>
          </div>
        </div>
                <div class="canvas-controls">
          <label for="northAngle">Góc Bắc:</label>
          <input type="range" id="northAngle" min="0" max="360" value="0">
          <button id="btn-set-center" class="secondary">Đặt tâm Bát quái</button>
          <button id="btn-set-entrance" class="secondary">Đặt cửa chính</button>
          <button id="btn-set-stair" class="secondary">Đặt cầu thang</button>
        </div>
        <canvas id="fengCanvas" width="400" height="400" style="border:1px solid #ccc;margin-top:8px;"></canvas>

        <div class="actions" style="margin-top:14px;">
          <button id="btn-analyze">Phân tích phong thủy</button>
          <button id="btn-save" class="secondary">Lưu hồ sơ</button>
          <button id="btn-export" class="secondary">Xuất CSV</button>
        </div>
      </section>
          </div>

        <div class="layer">
      <section id="result-section" class="card">
        <h2>4) Kết quả phân tích</h2>
        <div id="result-content">
          <p class="placeholder">Nhập đủ thông tin và nhấn “Phân tích phong thủy”.</p>
        </div>
        <div id="auspicious-days" class="muted" style="margin-top:10px;">—</div>
      </section>
          </div>
        
        <div class="layer">
      <section id="profiles-section" class="card">
        <h2>5) Danh sách hồ sơ</h2>
        <div class="list-actions">
          <input id="profiles-search" type="text" placeholder="Tìm theo tên hoặc SĐT...">
          <span class="muted">Dữ liệu lưu cục bộ (LocalStorage)</span>
        </div>
        <div class="table-wrap">
          <table class="data-table">
            <thead>
              <tr>
                <th>Họ tên</th>
                <th>SĐT</th>
                <th>Cung mệnh</th>
                <th>Thần số</th>
                <th>Hướng nhà</th>
                <th>Địa chỉ BĐS</th>
                <th>Tờ/Thửa</th>
                <th>Giá</th>
                <th>Lỗi MT</th>
                <th>Ngày lưu</th>
                <th>Thao tác</th>
              </tr>
            </thead>
   <tbody id="profiles-tbody"></tbody>
      </table>
    </div>
  </section>
        </div>

         <div class="layer">
      <section id="draw-section" class="card">
        <h2>6) Vẽ lên ảnh</h2>
        <input type="file" id="fileInput" accept="image/*" capture="environment">
        <div class="toolbar" style="margin:8px 0;">
          <button id="btn-start-draw" class="secondary" type="button">Bắt đầu vẽ</button>
          <button id="btn-finish-draw" class="secondary" type="button">Hoàn tất</button>
          <button id="btn-undo" class="secondary" type="button">Undo</button>
          <button id="btn-clear" class="secondary" type="button">Xóa</button>
        </div>
       <canvas id="canvas" width="400" height="400" style="border:1px solid #ccc;"></canvas>
      </section>
        </div>
      </main>
    </div>

    <footer>
      <p>Thạc sĩ Tâm lý học - Chuyên gia Phong Thủy Lê Bảo Trung - 0938021111</p>
    </footer>
  </div>

  <script type="module" src="public/compass.js"></script>
  <script type="module" src="public/horoscope.js"></script>
  <script type="module" src="public/profiles.js"></script>
  <script type="module">
    import('./script.js')
      .catch(err => console.error('Failed to load script.js', err));
  </script>
</body>
</html>
